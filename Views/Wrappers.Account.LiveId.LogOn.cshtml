@using Orchard.ContentManagement;
@using NGM.OpenAuthentication.Models;
@using NGM.OpenAuthentication.Core.OAuth;
@using System.Linq;
@using NGM.OpenAuthentication.Services;

@{
    Style.Require("Account");

    var settings = @WorkContext.CurrentSite.As<NGM.OpenAuthentication.Models.OpenAuthenticationSettingsPart>().Record;
    var returnUrl = Request.QueryString["ReturnUrl"];
    if (!string.IsNullOrEmpty(returnUrl)){
        returnUrl = "returnUrl=" + returnUrl;
    }
    var pagecontext = returnUrl;
}

@Display(Model.Metadata.ChildContent)

<fieldset class="login-form group">
    <legend>@T("Live Id Account")</legend>
    <iframe 
        id="WebAuthControl" 
        name="WebAuthControl"
        src="http://login.live.com/controls/WebAuthButton.htm?appid=@settings.LiveIdClientIdentifier&context=@pagecontext&style=font-size%3A+10pt%3B+font-family%3A+verdana%3B+background%3A+white%3B"
        width="80px"
        height="20px"
        marginwidth="0"
        marginheight="0"
        align="middle"
        frameborder="0"
        scrolling="no">
    </iframe>
</fieldset>